
# LAB
2022년 2학기~2023년 2학기까지 교내 랩실 Sir LAB에서 연구 및 개발한 소스들
***

## :sparkles: 2022년 2학기 공학기획프로젝트
#### 로봇환경설정
>개발한 로봇 : Pibo
> 개발 언어 : Python
>기존에 로봇의 사용했던 것들을 활용하여 STT와 TTS를 사용할 수 있도록 설정
>Pibo를 제어하는 Open Pibo 라이브러리 확인 및 활용
#### 로봇환경설정
> 개발한 로봇 : Pibo
>개발 언어 : Python
>기존에 로봇의 사용했던 것들을 활용하여 STT와 TTS를 사용할 수 있도록 설정
>Pibo를 제어하는 Open Pibo 라이브러리 확인 및 활용

#### 주제선정
: 로봇과 사람의 라포형성을 바탕으로 한 성경 구절 추천 로봇 서비스 개발

- 배경
	- 효과적인 성경 구절(조언)을 어떻게 전달 할 수 있을까
	  : 친밀감이 형성된 상태에서 효과적이다
	- 친밀감 형성
		- 사람들에게서 중요한 요소 중 하나인 상호작용이 줄어들면서 많은 문제를 일으킴
		- 사람들은 지속적이고 일관적인 공감을 타인에게 해줄 수 없음 (공감도 하나의 노동)

따라서 변하지 않는 로봇을 이용하여 친밀감이 형성된 이후 성경 구절(조언)을 해주면 효과적이다

***
:star: 2023년 1학기 캡스톤
-----------------------------
(CAP/src/play_scenario/CAP/final.py)

> #### 시나리오 개발
> :exclamation:사용자의 감정을 아는 것이 필수적이다
> :exclamation:설문조사를 통하여 사람들이 친밀감을 느끼는 경우들을 조사함
>> - 이름을 불러주는 일
>> - 노래 틀어주기
>> - 신체접촉
>> - 위로 및 같이 축하해주기
>> - 사진찍기
>> - 친절하고 친근한 말투

#### 시나리오 구현
> 사용자 이름 받아오기 -> 사용자의 기분 이해 -> 사용자 기분에 맞는 친밀감 형성 활동 진행 -> 사용자가 처한 상황에 맞는 성경구절 추천 및 조언 -> 마지막 인사

- 로봇과 사용자의 상호작용
	- STT를 통해 사용자의 음성을 텍스트로 변환하여 로봇이 이해할 수 있도록 함
	- TTS를 통해 로봇이 사용자에게 말을 하고 싶은 텍스트를 음성으로 전달함

- 사용자의 이름을 받아오는 일
	- BEFORE: 개발자가 개입하여 직접 프롬프트 창에 사용자 이름을 입력함
	- AFTER: 앱 개발을 통하여 로봇과 UDP 연결을하여 사용자 이름을 전달함

- 사용자의 기분 이해
	- "오늘 하루 뭐했어?"의 대답을 가지고 감정분석 API를 통해 긍정, 부정, 중립으로 분류함
	- 사용자의 기분의 데이터를 Firebase를 통해 관리
	-(긍정이었던 날 / 모든 날들의 감정)를 계산하여 사용자의 행복 지수를 앱을 통하여 보여줌

- 사용자 기분에 맞는 친밀감 형성 활동 진행
	- 사용자의 기분에 맞는 친밀감 활동 중 랜덤하게 한가지를 진행함
	- 친밀감 형성 활동
		- 부정적인 감정 활동
			- 로봇 터치 센서를 활용하여 위로
				- "너를 안아주고 싶지만 할 수 없어 나의 이마를 쓰담아줘"
			- 위로가 되는 노래 틀어주기
				- "노래 하나 추천해줄까?"
		- 긍정적인 감정 활동
			- 로봇의 LCD 화면을 통해 감정 표현
				- "너무 기쁘다! 나의 심장 박동 소리가 들리니? 나의 화면을 보면 이렇게 심장이 뛰는걸 볼 수 있어! (0부터 100까지 올라가는 화면을 LCD에 표시)"
			- 사진 찍기
				- "행복해하는 모습이 너무 좋아보인다. 내가 사진 하나 찍어줄까?"
				- 찍은 사진은 Firebase 데이터베이스에 저장되어 앱을 통해 사용자가 찍었던 사진을 볼 수 있음
			- 노래 재생
				- "노래 하나 틀어줄까?"
		- 중립인 감정 활동
			- 사진찍기
				- "오늘 스타일이 멋진데? 내가 사진 하나 찍어줄까?"
				- 찍은 사진은 Firebase 데이터베이스에 저장되어 앱을 통해 사용자가 찍었던 사진을 볼 수 있음
			- 노래 재생
				- "내가 노래 추천 하나 해줄까?"

- 사용자가 처한 상황에 맞는 성경구절 추천 및 조언
	- 사용자 기분을 분석하는 "오늘 하루 뭐했어?"의 대답을 가지고 LLM을 활용하여 사용자가 처한 상황을 이해하고 그에 맞는 성경 구절 주소와 조언을 추출함
	- 한국어 성경이 저작권에 걸려있는 것을 고려하여 LLM을 통해 성경 구절 주소만 받아와서 성경 구절 API를 통해 성경 구절을 가지고옴
	- 받아온 성경구절 주소, 성경 구절, 조언을 Firebase에 저장하여 사용자가 추천 받은 성경 구절, 성경 구절 주소, 조언을 앱을 통해 확인할 수 있음

- 마지막
	- 로봇의 팔 모터를 활용하여 악수를 권하는 모션을 함
	- "잘가"라는 말과 함께 시나리오 종료

#### 논문
- 총 두개의 논문으로 이 프로젝트를 정리하였습니다
- 인간형 로봇과 인간 사이의 친밀감 기반 상호작용 활동 연구 (한국어 논문)
	- 실제로 개발한 친밀감 활동이 사용자와 친밀감을 형성하였는지 실험하였고 그것에 대한 연구 과정을 정리하였습니다
- Improving Human-Robot Communication in an Empathetic Service Large Language Model and Emotion Recognition Model (영어 논문)
	- LLM을 로봇에 구현하였을 때의 실험과 그것에 대한 연구 과정을 정리하였습니다

***
## :star2: 2023년 2학기 포스트 캡스톤
: 캡스톤 때 했던 연구를 바탕으로 더 향상된 서비스를 개발 및 연구
(PCAP/draft.py)
#### 주제 : 로봇의 친밀감 활동이 사용자의 정서적 반응과 로봇에 대한 신뢰에 어떤 영향을 미치는가

#### 시나리오 수정
사용자 이름 받아오기 -> 사용자의 기분 이해 -> 사용자 기분에 맞는 친밀감 형성 활동 진행 -> 마지막 인사

- 코드 정리
	- 캡스톤 때는 하나의 파이썬 파일로 프로젝트를 진행하였습니다
	- 포스트 캡스톤 때 메인, 활동, 기능 별로 각각의 파일로 정리하여 유지보수와 지속 가능한 프로젝트로 개발하였습니다

- 설문조사를 통하여 캡스톤 때와 다른 친밀감 활동을 조사
	- 사진찍기
	- 노래 취향 공유
	- 대화하기
	- 게임하기
	- 로봇 모션을 통한 춤추기
	- 그림 일기
	- 명상

- 친밀감 활동을 랜덤하게 한가지만 진행하는 것이 아닌 사용자가 원하는 만큼 진행
	- "내가 준비한 활동들이 더 있는 데 해볼래?"

- 대화하기
	- 사람들이 대화를 통해 친밀감이 크게 형성되는 것을 보아 시나리오가 전체적을 사용자와 대화를 더 많이 할 수 있도록 시나리오를 수정하였다
	- 처음에 "오늘 하루 뭐했어?"에서 끝나는 것이 아니라 LLM을 활용하여 사용자에 대한 질문들을 하며 더 많은 대화를 할 수 있도록 유도하였습니다
	- "대화 종료"라는 Trigger를 통해 대화를 종료하고 친밀감 활동으로 넘어갈 수 있습니다

- 감정 분석
	- 기존에는 감정분석 API를 활용하여 감정 분석을 하였지만 이제는 LLM을 통해서 감정분석하여서 API들의 통일성을 가지고 갔습니다

- 친밀감 활동
	- 사진 찍기 (캡스톤과 동일하게 유지) - (긍정)
		- 기존 캡스톤 때 사용했던 활동을 유지하였습니다
	- 노래 취향 공유 - (긍정, 부정, 중립)
		- 캡스톤 때는 개발자가 직접 선별한 노래를 재생하는 방식으로 노래를 추천하였지만 포스트 캡스톤 때는 음악 플랫폼의 API를 활용하여 사용자가 원하는 음악 장르와 사용자의 감정을 기반으로 노래를 재생하는 것으로 수정하였습니다
	- 게임하기 - (긍정, 중립)
		- 사용자와 로봇이 각각 자신에 대한 두가지의 진실과 한가지의 거짓말 중 거짓말이 무엇인지 상대방이 맞추는 게임입니다
		- 이 것을 통해 로봇과 사용자는 서로에 대한 이해도를 높여줄 수 있는 활동입니다
	- 로봇 모션을 활용한 춤추기 - (긍정)
		- 뉴진스의 "Super Shy" 노래에 맞춰 로봇이 춤을 추도록 하였습니다
		- 기존 설문조사에서 흥이 많은 사람에 대한 선호도가 있다는 것을 고려하여 춤을 통해 로봇의 흥을 표현하였습니다
		- 로봇의 모션을 활용하여 사용자들이 로봇에 대한 다양한 움직임에 감탄하며 친밀감을 느낄 수 있도록 하였습니다
	- 그림 일기 - (부정)
		- 그림 일기가 사람의 부정적인 감정을 잠재우는데 큰 효과가 있다는 논문 결과로 그림 일기 활동을 채택하였습니다
		- 로봇이 그림 일기에 대한 설명을 하고 "다 그렸어"라는 Trigger를 통해 로봇이 사용자가 그린 그림을 보는 모션을 취하며 어떤 내용인지 묻습니다
		- 로봇은 그런 사용자를 공감해주며 위로하여줍니다
	- 명상 - (부정)
		- 사람의 호흡을 제어하며 생기는 안정감을 활용하여 부정적인 감정을 제어할 수 있도록 명상 활동을 채택하였습니다
		- 명상 음악과 함께 로봇이 들려주는 명상을 할 수 있는 지침을 재생합니다. 더나아가 사용자와 함께 명상하는 느낌을 주기 위하여 모션을 통해 로봇 또한 명상을 하는 느낌을 주었습니다.
